<% current_user_tasks = current_user.tasks %>

<%= turbo_stream.replace "task_#{@task.id}" do %>
  <%= render "tasks/task", task: @task %>
<% end %>
<%= turbo_stream.prepend "flash", partial: "shared/flash" %>
<%= turbo_stream.update "high_priority_count" do %>
  <%= current_user_tasks.high_priority.size %>
<% end %>
<%= turbo_stream.update "modal", "" %>
<%= turbo_stream.update "upcoming_tasks_content" do %>
  <%= render "dashboard/upcoming_tasks", tasks: current_user_tasks.due_tomorrow %>
<% end %>
<%= turbo_stream.update "dashboard_task_list" do %>
  <%= dashboard_task_list %>
<% end %>
<%= turbo_stream.update "completed_today_count", partial: "dashboard/task_count", locals: {
  completed: current_user_tasks.completed_today.size,
  total: current_user_tasks.due_today.size
} %>